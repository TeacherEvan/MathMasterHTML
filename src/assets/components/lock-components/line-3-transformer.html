<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warrior Lock Transformer - Rotating Metamorphosis</title>
    <link rel="stylesheet" href="/src/styles/css/lock-components/line-3-transformer.css">
</head>

<body>
    <div class="lock-container">
        <div class="shackle"></div>

        <div class="lock-body" id="lockBody">
            <!-- Horizontal Arms from Level 2 -->
            <div class="horizontal-arm left"></div>
            <div class="horizontal-arm right"></div>

            <!-- Rotating Chambers -->
            <div class="rotating-chamber chamber-1"></div>
            <div class="rotating-chamber chamber-2"></div>
            <div class="rotating-chamber chamber-3"></div>
            <div class="rotating-chamber chamber-4"></div>

            <!-- Inner Rotating Ring -->
            <div class="inner-ring"></div>

            <!-- Complex Gear System -->
            <div class="gear-complex gear-1"></div>
            <div class="gear-complex gear-2"></div>
            <div class="gear-complex gear-3"></div>
            <div class="gear-complex gear-4"></div>

            <!-- Central Transformer Core -->
            <div class="transformer-core"></div>

            <!-- Energy Arc Effects -->
            <div class="energy-arc arc-1"></div>
            <div class="energy-arc arc-2"></div>
            <div class="energy-arc arc-3"></div>
            <div class="energy-arc arc-4"></div>

            <!-- Particle Effects -->
            <div class="particle p1"></div>
            <div class="particle p2"></div>
            <div class="particle p3"></div>
            <div class="particle p4"></div>
            <div class="particle p5"></div>
            <div class="particle p6"></div>
            <div class="particle p7"></div>
            <div class="particle p8"></div>
        </div>
    </div>

    <div class="control-panel">
        <button class="btn" onclick="activateLevel3()">Activate Level 3</button>
        <button class="btn" onclick="resetLock()">Reset</button>
    </div>

    <script>
        // Level 3 Lock Controller
        class Level3Lock {
            constructor() {
                this.lockBody = document.getElementById('lockBody');
                this.isActive = false;
                this.rotationPhase = 0;
            }

            activate() {
                if (!this.isActive) {
                    this.lockBody.classList.add('level-3-active');
                    this.isActive = true;
                    this.rotationPhase = 0;

                    // Trigger advanced transformation sequence
                    this.startTransformationSequence();

                    // Play mechanical transformation sound
                    this.playTransformationSound();

                    console.log('Level 3 Lock: Rotating Metamorphosis Activated');
                }
            }

            startTransformationSequence() {
                // Phase 1: Initial rotation and chamber emergence
                setTimeout(() => {
                    console.log('ðŸ”„ Phase 1: Chamber Emergence');
                    this.rotationPhase = 1;
                }, 500);

                // Phase 2: Gear system activation
                setTimeout(() => {
                    console.log('âš™ï¸ Phase 2: Gear System Activation');
                    this.rotationPhase = 2;
                }, 1500);

                // Phase 3: Energy discharge and core transformation
                setTimeout(() => {
                    console.log('âš¡ Phase 3: Energy Core Transformation');
                    this.rotationPhase = 3;
                }, 2500);

                // Phase 4: Complete metamorphosis
                setTimeout(() => {
                    console.log('ðŸŒŸ Phase 4: Complete Metamorphosis');
                    this.rotationPhase = 4;
                }, 3500);
            }

            reset() {
                this.lockBody.classList.remove('level-3-active');
                this.isActive = false;
                this.rotationPhase = 0;
                console.log('Level 3 Lock: Reset to Base State');
            }

            playTransformationSound() {
                // Placeholder for advanced transformation sound effects
                console.log('ðŸŽµ Transformation Sound: WHIRR-CLANK-ROTATE-ZING');
            }

            getCurrentPhase() {
                return this.rotationPhase;
            }

            getStatus() {
                return {
                    level: 3,
                    name: 'Rotating Metamorphosis',
                    active: this.isActive,
                    phase: this.rotationPhase,
                    description: 'Lock undergoes complex rotating transformation with multi-chambered mechanical evolution'
                };
            }
        }

        // Global instance
        const level3Lock = new Level3Lock();

        // Control functions
        function activateLevel3() {
            level3Lock.activate();
        }

        function resetLock() {
            level3Lock.reset();
        }

        // API for integration with main game
        window.Level3Lock = {
            activate: () => level3Lock.activate(),
            reset: () => level3Lock.reset(),
            getStatus: () => level3Lock.getStatus(),
            isActive: () => level3Lock.isActive,
            getCurrentPhase: () => level3Lock.getCurrentPhase()
        };

        // Auto-demo sequence (optional)
        setTimeout(() => {
            console.log('Level 3 Lock Component Loaded and Ready');
            console.log('ðŸŽ¯ Features: Rotating Chambers, Complex Gears, Energy Arcs, Particle Effects');
        }, 100);

        // Advanced interaction handlers
        document.addEventListener('keydown', (event) => {
            if (event.key === '3') {
                activateLevel3();
            } else if (event.key === 'r' || event.key === 'R') {
                resetLock();
            }
        });
    </script>
</body>

</html>