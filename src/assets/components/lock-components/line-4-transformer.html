<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level 4 Lock Transformer - Multi-Directional Expansion</title>
    <link rel="stylesheet" href="/src/styles/css/lock-components/line-4-transformer.css">
</head>

<body>
    <div class="controls">
    </div>

    <div class="lock-container">
        <div class="lock-body" id="lockBody">
            <div class="core" id="core"></div>

            <!-- Rotating Chambers from Level 3 -->
            <div class="rotating-chamber chamber-1"></div>
            <div class="rotating-chamber chamber-2"></div>
            <div class="rotating-chamber chamber-3"></div>
            <div class="rotating-chamber chamber-4"></div>

            <!-- Horizontal Arms from Level 3 -->
            <div class="horizontal-arm left" id="horiArmLeft"></div>
            <div class="horizontal-arm right" id="horiArmRight"></div>

            <!-- Cross Pattern Extensions -->
            <div class="expansion-arm north" id="armNorth"></div>
            <div class="expansion-arm south" id="armSouth"></div>
            <div class="expansion-arm east" id="armEast"></div>
            <div class="expansion-arm west" id="armWest"></div>

            <!-- Horizontal Arms from Level 3 -->
            <div class="horizontal-arm left" id="horiArmLeft"></div>
            <div class="horizontal-arm right" id="horiArmRight"></div>

            <!-- Electrical Arcs -->
            <div class="electric-arc arc-1" id="arc1"></div>
            <div class="electric-arc arc-2" id="arc2"></div>
            <div class="electric-arc arc-3" id="arc3"></div>
            <div class="electric-arc arc-4" id="arc4"></div>

            <!-- Hydraulic Pistons -->
            <div class="hydraulic-piston piston-1" id="piston1"></div>
            <div class="hydraulic-piston piston-2" id="piston2"></div>
            <div class="hydraulic-piston piston-3" id="piston3"></div>
            <div class="hydraulic-piston piston-4" id="piston4"></div>
            <div class="hydraulic-piston piston-5" id="piston5"></div>
            <div class="hydraulic-piston piston-6" id="piston6"></div>
            <div class="hydraulic-piston piston-7" id="piston7"></div>
            <div class="hydraulic-piston piston-8" id="piston8"></div>

            <!-- Energy Conduits -->
            <div class="energy-conduit conduit-1" id="conduit1"></div>
            <div class="energy-conduit conduit-2" id="conduit2"></div>
            <div class="energy-conduit conduit-3" id="conduit3"></div>
            <div class="energy-conduit conduit-4" id="conduit4"></div>

            <!-- Rotating Chambers from Level 3 -->
            <div class="rotating-chamber chamber-1" id="chamber1"></div>
            <div class="rotating-chamber chamber-2" id="chamber2"></div>
            <div class="rotating-chamber chamber-3" id="chamber3"></div>
            <div class="rotating-chamber chamber-4" id="chamber4"></div>
        </div>
    </div>

    <script>
        class Level4Lock {
            constructor() {
                this.isActive = false;
                this.currentPhase = 0;
                this.maxPhases = 5;
                this.elements = {
                    lockBody: document.getElementById('lockBody'),
                    core: document.getElementById('core'),
                    statusDisplay: document.getElementById('statusDisplay'),
                    arms: [
                        document.getElementById('armNorth'),
                        document.getElementById('armSouth'),
                        document.getElementById('armEast'),
                        document.getElementById('armWest')
                    ],
                    horizontalArms: [
                        document.getElementById('horiArmLeft'),
                        document.getElementById('horiArmRight')
                    ],
                    arcs: [
                        document.getElementById('arc1'),
                        document.getElementById('arc2'),
                        document.getElementById('arc3'),
                        document.getElementById('arc4')
                    ],
                    pistons: [
                        document.getElementById('piston1'),
                        document.getElementById('piston2'),
                        document.getElementById('piston3'),
                        document.getElementById('piston4'),
                        document.getElementById('piston5'),
                        document.getElementById('piston6'),
                        document.getElementById('piston7'),
                        document.getElementById('piston8')
                    ],
                    conduits: [
                        document.getElementById('conduit1'),
                        document.getElementById('conduit2'),
                        document.getElementById('conduit3'),
                        document.getElementById('conduit4')
                    ],
                    chambers: [
                        document.getElementById('chamber1'),
                        document.getElementById('chamber2'),
                        document.getElementById('chamber3'),
                        document.getElementById('chamber4')
                    ]
                };

                this.setupEventListeners();
            }

            setupEventListeners() {
                document.addEventListener('keydown', (event) => {
                    if (event.key === '4') {
                        this.activate();
                    } else if (event.key.toLowerCase() === 'r') {
                        this.reset();
                    }
                });
            }

            activate() {
                if (this.isActive) return;

                this.isActive = true;
                this.currentPhase = 1;

                console.log('Level 4 Lock: Multi-Directional Expansion Initiated');
                this.updateStatus('MULTI-DIRECTIONAL EXPANSION');

                // Phase 1: Core activation
                setTimeout(() => this.activatePhase1(), 100);

                // Phase 2: Cross-pattern extension
                setTimeout(() => this.activatePhase2(), 800);

                // Phase 3: Hydraulic systems
                setTimeout(() => this.activatePhase3(), 1600);

                // Phase 4: Electrical discharge
                setTimeout(() => this.activatePhase4(), 2400);

                // Phase 5: Energy flow
                setTimeout(() => this.activatePhase5(), 3200);
            }

            activatePhase1() {
                this.currentPhase = 1;
                console.log('Phase 1: Core Transformation');
                this.elements.lockBody.classList.add('active');
                this.elements.core.classList.add('active');
                this.updateStatus('CORE TRANSFORMATION');
            }

            activatePhase2() {
                this.currentPhase = 2;
                console.log('Phase 2: Cross-Pattern Extension');
                this.elements.arms.forEach((arm, index) => {
                    setTimeout(() => {
                        arm.classList.add('active');
                    }, index * 200);
                });
                this.updateStatus('CROSS-PATTERN EXTENSION');
            }

            activatePhase3() {
                this.currentPhase = 3;
                console.log('Phase 3: Hydraulic Activation');
                this.elements.pistons.forEach((piston, index) => {
                    setTimeout(() => {
                        piston.classList.add('active');
                    }, index * 100);
                });
                this.updateStatus('HYDRAULIC ACTIVATION');
            }

            activatePhase4() {
                this.currentPhase = 4;
                console.log('Phase 4: Electrical Discharge');
                this.elements.arcs.forEach((arc, index) => {
                    setTimeout(() => {
                        arc.classList.add('active');
                    }, index * 150);
                });
                this.updateStatus('ELECTRICAL DISCHARGE');
            }

            activatePhase5() {
                this.currentPhase = 5;
                console.log('Phase 5: Energy Flow Complete');
                this.elements.conduits.forEach((conduit, index) => {
                    setTimeout(() => {
                        conduit.classList.add('active');
                    }, index * 120);
                });
                this.updateStatus('LEVEL 4: EXPANSION COMPLETE');
            }

            reset() {
                console.log('Level 4 Lock: Reset');
                this.isActive = false;
                this.currentPhase = 0;

                // Remove all active states
                this.elements.lockBody.classList.remove('active');
                this.elements.core.classList.remove('active');

                [...this.elements.arms, ...this.elements.horizontalArms, ...this.elements.arcs, ...this.elements.pistons, ...this.elements.conduits, ...this.elements.chambers]
                    .forEach(element => element.classList.remove('active'));

                this.updateStatus('LEVEL 4: STANDBY');
            }

            updateStatus(message) {
                this.elements.statusDisplay.textContent = message;
            }

            getStatus() {
                return {
                    level: 4,
                    active: this.isActive,
                    phase: this.currentPhase,
                    maxPhases: this.maxPhases,
                    status: this.elements.statusDisplay.textContent
                };
            }

            getCurrentPhase() {
                return this.currentPhase;
            }
        }

        // Initialize Level 4 Lock
        const level4Lock = new Level4Lock();

        // Global API
        window.Level4Lock = {
            activate: () => level4Lock.activate(),
            reset: () => level4Lock.reset(),
            getStatus: () => level4Lock.getStatus(),
            isActive: () => level4Lock.isActive,
            getCurrentPhase: () => level4Lock.getCurrentPhase()
        };

        console.log('Level 4 Lock Transformer Loaded - Multi-Directional Expansion Ready');
        console.log('Controls: Press "4" to activate, "R" to reset');
    </script>
</body>

</html>