<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level 6 Lock Transformer - Ultimate Cosmic Metamorphosis</title>
    <link rel="stylesheet" href="/src/styles/css/lock-components/line-6-transformer.css">
    <link rel="stylesheet" href="/src/styles/css/lock-components/line-6-transformer.effects.css">
</head>
</head>

<body>
    <div class="controls">
    </div>

    <div class="lock-container">
        <!-- Cosmic Background Effect -->
        <div class="cosmic-background" id="cosmicBackground"></div>

        <!-- Main Lock Body (Starting from Level 5's final state) -->
        <div class="lock-body" id="lockBody">
            <!-- Core Element -->
            <div class="core" id="core"></div>

            <!-- Black Hole Event Horizon -->
            <div class="black-hole" id="blackHole"></div>

            <!-- Electric Field Lines -->
            <div class="electric-field field-1" id="field1"></div>
            <div class="electric-field field-2" id="field2"></div>
            <div class="electric-field field-3" id="field3"></div>
            <div class="electric-field field-4" id="field4"></div>
            <div class="electric-field field-5" id="field5"></div>
            <div class="electric-field field-6" id="field6"></div>

            <!-- Detachable Segments from Level 5 -->
            <div class="detachable-segment segment-nw" id="segmentNW"></div>
            <div class="detachable-segment segment-ne" id="segmentNE"></div>
            <div class="detachable-segment segment-sw" id="segmentSW"></div>
            <div class="detachable-segment segment-se" id="segmentSE"></div>

            <!-- Shooting Particles -->
            <div class="shooting-particle" id="particle1"></div>
            <div class="shooting-particle" id="particle2"></div>
            <div class="shooting-particle" id="particle3"></div>
            <div class="shooting-particle" id="particle4"></div>
            <div class="shooting-particle" id="particle5"></div>
            <div class="shooting-particle" id="particle6"></div>
            <div class="shooting-particle" id="particle7"></div>
            <div class="shooting-particle" id="particle8"></div>
            <div class="shooting-particle" id="particle9"></div>
            <div class="shooting-particle" id="particle10"></div>
            <div class="shooting-particle" id="particle11"></div>
            <div class="shooting-particle" id="particle12"></div>

            <!-- Colorful Orb Aura -->
            <div class="orb-aura" id="orbAura"></div>

            <!-- Colorful Orb - Final State -->
            <div class="colorful-orb" id="colorfulOrb">
                <!-- 3D Inner Core -->
                <div class="orb-inner-core" id="orbInnerCore"></div>
                <!-- 3D Reflection -->
                <div class="orb-reflection" id="orbReflection"></div>
            </div>
        </div>

    </div>

    <script>
        class Level6Lock {
            constructor() {
                this.isActive = false;
                this.currentPhase = 0;
                this.totalPhases = 8;

                this.elements = {
                    lockBody: document.getElementById('lockBody'),
                    core: document.getElementById('core'),
                    blackHole: document.getElementById('blackHole'),
                    cosmicBackground: document.getElementById('cosmicBackground'),
                    colorfulOrb: document.getElementById('colorfulOrb'),
                    orbAura: document.getElementById('orbAura'),
                    orbInnerCore: document.getElementById('orbInnerCore'),
                    orbReflection: document.getElementById('orbReflection'),
                    statusDisplay: document.getElementById('statusDisplay'),
                    segments: {
                        nw: document.getElementById('segmentNW'),
                        ne: document.getElementById('segmentNE'),
                        sw: document.getElementById('segmentSW'),
                        se: document.getElementById('segmentSE')
                    },
                    fields: [],
                    particles: []
                };

                // Initialize electric fields
                for (let i = 1; i <= 6; i++) {
                    this.elements.fields.push(document.getElementById(`field${i}`));
                }

                // Initialize shooting particles
                for (let i = 1; i <= 12; i++) {
                    this.elements.particles.push(document.getElementById(`particle${i}`));
                }

                this.bindEvents();
                this.setupParticlePositions();
            }

            setupParticlePositions() {
                // Set random shooting directions for particles
                this.elements.particles.forEach((particle, index) => {
                    const angle = (index * 30) * (Math.PI / 180); // 30 degrees apart
                    const distance = 150 + (index % 3) * 50; // Varying distances

                    const shootX = Math.cos(angle) * distance;
                    const shootY = Math.sin(angle) * distance;

                    particle.style.setProperty('--shoot-x', `${shootX}px`);
                    particle.style.setProperty('--shoot-y', `${shootY}px`);
                    particle.style.animationDelay = `${index * 0.2}s`;
                });

                // Set exit directions for segments
                this.elements.segments.nw.style.setProperty('--exit-x', '-300px');
                this.elements.segments.nw.style.setProperty('--exit-y', '-300px');
                this.elements.segments.ne.style.setProperty('--exit-x', '300px');
                this.elements.segments.ne.style.setProperty('--exit-y', '-300px');
                this.elements.segments.sw.style.setProperty('--exit-x', '-300px');
                this.elements.segments.sw.style.setProperty('--exit-y', '300px');
                this.elements.segments.se.style.setProperty('--exit-x', '300px');
                this.elements.segments.se.style.setProperty('--exit-y', '300px');
            }

            bindEvents() {
                document.addEventListener('keydown', (e) => {
                    if (e.key === '6') {
                        this.activate();
                    } else if (e.key.toLowerCase() === 'r') {
                        this.reset();
                    }
                });
            }

            activate() {
                if (this.isActive) return;

                console.log('ðŸŒŒ Level 6 Ultimate Cosmic Metamorphosis: Particle Shooting & Cosmic Orb Formation Initiated');
                this.isActive = true;
                this.currentPhase = 1;

                // Phase 1: Cosmic background and status display (0-0.8s)
                setTimeout(() => this.phase1_CosmicAwakening(), 100);

                // Phase 2: Segment cosmic exit (0.8-1.6s)
                setTimeout(() => this.phase2_SegmentCosmicExit(), 800);

                // Phase 3: Particle shooting begins (1.6-2.4s)
                setTimeout(() => this.phase3_ParticleShooting(), 1600);

                // Phase 4: Core and lock body transformation (2.4-3.2s)
                setTimeout(() => this.phase4_CoreTransformation(), 2400);

                // Phase 5: Black hole formation (3.2-4.0s)
                setTimeout(() => this.phase5_BlackHoleFormation(), 3200);

                // Phase 6: Electric field discharge (4.0-4.8s)
                setTimeout(() => this.phase6_ElectricFieldDischarge(), 4000);

                // Phase 7: Black hole collapse (4.8-5.6s)
                setTimeout(() => this.phase7_BlackHoleCollapse(), 4800);

                // Phase 8: Colorful orb emergence (5.6s+)
                setTimeout(() => this.phase8_ColorfulOrbFormation(), 5600);
            }

            phase1_CosmicAwakening() {
                console.log('ðŸŒŒ Phase 1: Cosmic Background Awakening');
                this.currentPhase = 1;
                this.elements.cosmicBackground.classList.add('active');
                this.elements.statusDisplay.classList.add('active');
            }

            phase2_SegmentCosmicExit() {
                console.log('ðŸš€ Phase 2: Segment Cosmic Exit');
                this.currentPhase = 2;

                Object.values(this.elements.segments).forEach((segment, index) => {
                    setTimeout(() => {
                        segment.classList.add('cosmic-exit');
                        console.log(`   Segment ${index + 1} launching into cosmic space`);
                    }, index * 200);
                });
            }

            phase3_ParticleShooting() {
                console.log('âœ¨ Phase 3: Dramatic Particle Shooting');
                this.currentPhase = 3;

                this.elements.particles.forEach((particle, index) => {
                    setTimeout(() => {
                        particle.classList.add('active');
                    }, index * 100);
                });
            }

            phase4_CoreTransformation() {
                console.log('ðŸ”® Phase 4: Core Cosmic Transformation');
                this.currentPhase = 4;

                this.elements.core.classList.add('active');
                this.elements.lockBody.classList.add('active');
            }

            phase5_BlackHoleFormation() {
                console.log('ðŸ•³ï¸ Phase 5: Black Hole Event Horizon Formation');
                this.currentPhase = 5;

                this.elements.blackHole.classList.add('active');
            }

            phase6_ElectricFieldDischarge() {
                console.log('âš¡ Phase 6: Electric Field Discharge');
                this.currentPhase = 6;

                this.elements.fields.forEach((field, index) => {
                    setTimeout(() => {
                        field.classList.add('active');
                    }, index * 100);
                });
            }

            phase7_BlackHoleCollapse() {
                console.log('ðŸ’« Phase 7: Black Hole Collapse');
                this.currentPhase = 7;

                // Begin black hole collapse
                this.elements.blackHole.style.transition = 'all 1s ease-in-out';
                this.elements.blackHole.style.transform = 'scale(0)';
                this.elements.blackHole.style.opacity = '0';

                // Stop electric fields
                this.elements.fields.forEach(field => {
                    field.classList.remove('active');
                });
            }

            phase8_ColorfulOrbFormation() {
                console.log('ðŸŒˆ Phase 8: Blissful Colorful Orb Formation');
                this.currentPhase = 8;

                // Stop particle shooting
                this.elements.particles.forEach(particle => {
                    particle.classList.remove('active');
                });

                // Manifest the colorful orb with enhanced 3D effects
                setTimeout(() => {
                    this.elements.orbAura.classList.add('active');
                }, 300);

                setTimeout(() => {
                    this.elements.colorfulOrb.classList.add('active');
                }, 600);

                setTimeout(() => {
                    this.elements.orbInnerCore.classList.add('active');
                }, 900);

                setTimeout(() => {
                    this.elements.orbReflection.classList.add('active');
                }, 1200);

                console.log('ðŸŽ‰ Level 6 Ultimate Cosmic Metamorphosis: COMPLETE - Cosmic Orb of Infinite Knowledge Achieved!');
            }

            reset() {
                console.log('ðŸ”„ Level 6 Reset: Returning to Level 5 final state');
                this.isActive = false;
                this.currentPhase = 0;

                // Remove all active classes and reset transforms
                this.elements.lockBody.classList.remove('active');
                this.elements.core.classList.remove('active');
                this.elements.blackHole.classList.remove('active');
                this.elements.cosmicBackground.classList.remove('active');
                this.elements.colorfulOrb.classList.remove('active');
                this.elements.orbAura.classList.remove('active');
                this.elements.orbInnerCore.classList.remove('active');
                this.elements.orbReflection.classList.remove('active');
                this.elements.statusDisplay.classList.remove('active');

                // Reset black hole
                this.elements.blackHole.style.transition = '';
                this.elements.blackHole.style.transform = '';
                this.elements.blackHole.style.opacity = '';

                Object.values(this.elements.segments).forEach(segment => {
                    segment.classList.remove('cosmic-exit');
                });

                this.elements.fields.forEach(field => {
                    field.classList.remove('active');
                });

                this.elements.particles.forEach(particle => {
                    particle.classList.remove('active');
                });
            }

            getStatus() {
                return {
                    isActive: this.isActive,
                    currentPhase: this.currentPhase,
                    totalPhases: this.totalPhases,
                    phaseNames: [
                        'Inactive',
                        'Cosmic Awakening',
                        'Segment Cosmic Exit',
                        'Particle Shooting',
                        'Core Transformation',
                        'Black Hole Formation',
                        'Electric Field Discharge',
                        'Black Hole Collapse',
                        'Colorful Orb Formation'
                    ]
                };
            }

            getCurrentPhase() {
                return this.currentPhase;
            }

            isOrbActive() {
                return this.elements.colorfulOrb.classList.contains('active');
            }

            isCosmicComplete() {
                return this.currentPhase === 8 && this.isOrbActive();
            }
        }

        // Initialize Level 6 Lock
        const level6Lock = new Level6Lock();

        // Make it globally accessible for integration
        window.Level6Lock = {
            activate: () => level6Lock.activate(),
            reset: () => level6Lock.reset(),
            getStatus: () => level6Lock.getStatus(),
            isActive: () => level6Lock.isActive,
            getCurrentPhase: () => level6Lock.getCurrentPhase(),
            isOrbActive: () => level6Lock.isOrbActive(),
            isCosmicComplete: () => level6Lock.isCosmicComplete()
        };

        console.log('ðŸŒŒ Level 6 Lock Transformer Initialized - Ultimate Cosmic Metamorphosis Ready');
        console.log('Press "6" to activate, "R" to reset');
    </script>
</body>

</html>