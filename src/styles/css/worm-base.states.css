/* === WORM STATES === */
.worm-container.carrying {
  animation: worm-bounce 0.6s ease-in-out infinite;
}

@keyframes worm-bounce {
  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-3px);
  }
}

.worm-container.flickering {
  animation: lsd-flicker 0.3s linear infinite;
  filter: drop-shadow(0 3px 8px rgba(0, 0, 0, 0.9))
    drop-shadow(0 0 20px rgba(255, 0, 255, 1));
}

@keyframes lsd-flicker {
  0% {
    filter: drop-shadow(0 3px 8px rgba(255, 0, 0, 0.9))
      drop-shadow(0 0 20px rgba(255, 0, 0, 1)) hue-rotate(0deg);
  }

  14% {
    filter: drop-shadow(0 3px 8px rgba(255, 165, 0, 0.9))
      drop-shadow(0 0 20px rgba(255, 165, 0, 1)) hue-rotate(60deg);
  }

  28% {
    filter: drop-shadow(0 3px 8px rgba(255, 255, 0, 0.9))
      drop-shadow(0 0 20px rgba(255, 255, 0, 1)) hue-rotate(120deg);
  }

  42% {
    filter: drop-shadow(0 3px 8px rgba(0, 255, 0, 0.9))
      drop-shadow(0 0 20px rgba(0, 255, 0, 1)) hue-rotate(180deg);
  }

  57% {
    filter: drop-shadow(0 3px 8px rgba(0, 0, 255, 0.9))
      drop-shadow(0 0 20px rgba(0, 0, 255, 1)) hue-rotate(240deg);
  }

  71% {
    filter: drop-shadow(0 3px 8px rgba(75, 0, 130, 0.9))
      drop-shadow(0 0 20px rgba(75, 0, 130, 1)) hue-rotate(300deg);
  }

  85% {
    filter: drop-shadow(0 3px 8px rgba(238, 130, 238, 0.9))
      drop-shadow(0 0 20px rgba(238, 130, 238, 1)) hue-rotate(330deg);
  }

  100% {
    filter: drop-shadow(0 3px 8px rgba(255, 0, 0, 0.9))
      drop-shadow(0 0 20px rgba(255, 0, 0, 1)) hue-rotate(360deg);
  }
}

.worm-container.worm-multiply {
  animation: worm-multiply 0.5s ease-out;
}

@keyframes worm-multiply {
  0%,
  100% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.5);
    filter: drop-shadow(0 0 30px rgba(255, 255, 0, 1));
  }
}

/* Red flash for bad luck (20% chance backfire) */
@keyframes worm-flash-red {
  0% {
    filter: drop-shadow(0 0 10px rgba(0, 255, 0, 0.8));
  }

  50% {
    filter: drop-shadow(0 0 30px rgba(255, 0, 0, 1))
      drop-shadow(0 0 50px rgba(255, 0, 0, 0.8));
    transform: scale(1.3);
  }

  100% {
    filter: drop-shadow(0 0 10px rgba(0, 255, 0, 0.8));
    transform: scale(1);
  }
}

/* Purple flash for cloning curse activation/continuation */
@keyframes worm-flash-purple {
  0% {
    filter: drop-shadow(0 0 10px rgba(0, 255, 0, 0.8));
  }

  50% {
    filter: drop-shadow(0 0 40px rgba(255, 0, 255, 1))
      drop-shadow(0 0 60px rgba(138, 43, 226, 0.9));
    transform: scale(1.4);
  }

  100% {
    filter: drop-shadow(0 0 10px rgba(0, 255, 0, 0.8));
    transform: scale(1);
  }
}
